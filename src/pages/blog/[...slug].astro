---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();

function formatDate(date: Date) {
  return date.toLocaleDateString('es-ES', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
}
---

<Layout title={post.data.title} description={post.data.description}>
  <Header />
  
  <main class="pt-28 pb-20">
    <article class="max-w-4xl mx-auto px-6">
      <!-- Header -->
      <header class="mb-12">
        <a href="/blog" class="inline-flex items-center gap-2 text-cyan-400 hover:text-cyan-300 transition-colors mb-6">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/>
          </svg>
          Volver al blog
        </a>
        <time class="text-cyan-400 text-sm font-medium block mb-4">
          {formatDate(post.data.pubDate)}
        </time>
        <h1 class="text-4xl md:text-5xl font-bold text-white mb-6">
          {post.data.title}
        </h1>
        <p class="text-xl text-slate-400">
          {post.data.description}
        </p>
        <div class="flex flex-wrap gap-2 mt-6">
          {post.data.tags.map((tag) => (
            <span class="px-3 py-1 bg-slate-700 text-slate-300 text-sm rounded-full">
              {tag}
            </span>
          ))}
        </div>
      </header>

      <!-- Content -->
      <div class="prose prose-invert prose-lg max-w-none prose-headings:text-white prose-a:text-cyan-400 prose-code:text-cyan-300 prose-pre:bg-slate-800 prose-pre:border prose-pre:border-slate-700">
        <Content />
      </div>

      <!-- Footer -->
      <footer class="mt-16 pt-8 border-t border-slate-800">
        <div class="flex justify-between items-center">
          <a href="/blog" class="inline-flex items-center gap-2 text-cyan-400 hover:text-cyan-300 transition-colors">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/>
            </svg>
            Volver al blog
          </a>
        </div>
      </footer>
    </article>
  </main>

  <Footer />
</Layout>

<style>
  .prose h1 { font-size: 1.875rem; font-weight: 700; margin-top: 2rem; margin-bottom: 1rem; color: white; }
  .prose h2 { font-size: 1.5rem; font-weight: 700; margin-top: 2rem; margin-bottom: 1rem; color: white; }
  .prose h3 { font-size: 1.25rem; font-weight: 700; margin-top: 1.5rem; margin-bottom: 0.75rem; color: white; }
  .prose p { color: #cbd5e1; line-height: 1.75; margin-bottom: 1rem; }
  .prose ul { list-style-type: disc; list-style-position: inside; color: #cbd5e1; margin-bottom: 1rem; }
  .prose ol { list-style-type: decimal; list-style-position: inside; color: #cbd5e1; margin-bottom: 1rem; }
  .prose li { color: #cbd5e1; margin-bottom: 0.5rem; }
  .prose code { background-color: #1e293b; padding: 0.125rem 0.375rem; border-radius: 0.25rem; font-size: 0.875rem; color: #67e8f9; }
  .prose pre { background-color: #1e293b; border-radius: 0.5rem; padding: 1rem; overflow-x: auto; margin-bottom: 1rem; border: 1px solid #334155; }
  .prose pre code { background-color: transparent; padding: 0; }
  .prose blockquote { border-left: 4px solid #22d3ee; padding-left: 1rem; font-style: italic; color: #94a3b8; }
  .prose strong { color: white; font-weight: 600; }
  .prose em { color: #cbd5e1; font-style: italic; }
  .prose a { color: #22d3ee; }
  .prose a:hover { color: #67e8f9; }
</style>
